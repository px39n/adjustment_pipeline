/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

const vibrancySettings = [
    "default",
    "content",
    "fullscreen-ui",
    "header",
    "hud",
    "menu",
    "popover",
    "selection",
    "sheet",
    "sidebar",
    "titlebar",
    "tooltip",
    "under-page",
    "under-window",
    "window",
];
const DEFAULT_SETTINGS = {
    opacity: 1,
    alwaysOnTop: false,
    vibrancy: "default",
    trafficLightsPosX: 7,
    trafficLightsPosY: 6,
};
const ICON_SVG = `<path d="M41.667 20.833a4.167 4.167 0 1 0 4.167 4.167A4.167 4.167 0 0 0 41.667 20.833ZM25 20.833A4.167 4.167 0 1 0 29.167 25 4.167 4.167 0 0 0 25 20.833Zm33.333 0a4.167 4.167 0 1 0 4.167 4.167A4.167 4.167 0 0 0 58.333 20.833Zm25 -16.667H16.667A12.5 12.5 0 0 0 4.167 16.667V83.333a12.5 12.5 0 0 0 12.5 12.5H83.333a12.5 12.5 0 0 0 12.5 -12.5V16.667A12.5 12.5 0 0 0 83.333 4.167Zm4.167 79.167a4.167 4.167 0 0 1 -4.167 4.167H16.667a4.167 4.167 0 0 1 -4.167 -4.167V45.833H87.5ZM87.5 37.5H12.5V16.667A4.167 4.167 0 0 1 16.667 12.5H83.333a4.167 4.167 0 0 1 4.167 4.167Z" fill="currentColor"/>`;
const setAlwaysOnTop = (on) => {
    window.require("electron").remote.getCurrentWindow().setAlwaysOnTop(on);
};
const setOpacity = (opacity) => {
    window.require("electron").remote.getCurrentWindow().setOpacity(opacity);
};
const setVibrancy = (vibrancy, isTranslucent) => {
    if (vibrancy === "default" && isTranslucent) {
        return window
            .require("electron")
            .remote.getCurrentWindow()
            .setVibrancy("window");
    }
    if (vibrancy === "default") {
        document.body.removeClass("is-translucent");
        return window
            .require("electron")
            .remote.getCurrentWindow()
            .setVibrancy(null);
    }
    document.body.addClass("is-translucent");
    window.require("electron").remote.getCurrentWindow().setVibrancy(vibrancy);
};
const setTrafficLightsPos = (styleTag, x, y) => {
    styleTag.innerText = `
      :root {
        --ewt-traffic-light-x: ${x}px;
        --ewt-traffic-light-y: ${y}px;
      }
    `
        .trim()
        .replace(/[\r\n\s]+/g, " ");
    window
        .require("electron")
        .remote.getCurrentWindow()
        .setTrafficLightPosition({ x, y });
};
class ElectronWindowTweaker extends obsidian.Plugin {
    getIsTranslucent() {
        return !!this.app.vault.getConfig("translucency");
    }
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.loadSettings();
            this.styleTag = document.createElement("style");
            this.styleTag.id = "ewt-styles";
            document.getElementsByTagName("head")[0].appendChild(this.styleTag);
            this.addSettingTab(new SettingsTab(this.app, this));
            this.app.workspace.onLayoutReady(() => {
                setTimeout(() => {
                    // Really shove this baby to the end
                    this.setupStatusBar();
                });
            });
            setOpacity(this.settings.opacity);
            setAlwaysOnTop(this.settings.alwaysOnTop);
            if (process.platform === "darwin") {
                setVibrancy(this.settings.vibrancy, this.getIsTranslucent());
                setTrafficLightsPos(this.styleTag, this.settings.trafficLightsPosX, this.settings.trafficLightsPosY);
            }
            this.addCommand({
                id: "ewt-increase-opacity",
                name: "Increase opacity",
                callback: () => __awaiter(this, void 0, void 0, function* () {
                    if (this.settings.opacity === 1)
                        return;
                    this.settings.opacity = Math.min(this.settings.opacity + 0.05, 1);
                    setOpacity(this.settings.opacity);
                    yield this.saveSettings();
                }),
            });
            this.addCommand({
                id: "ewt-decrease-opacity",
                name: "Decrease opacity",
                callback: () => __awaiter(this, void 0, void 0, function* () {
                    if (this.settings.opacity === 0)
                        return;
                    this.settings.opacity = Math.max(this.settings.opacity - 0.05, 0);
                    setOpacity(this.settings.opacity);
                    yield this.saveSettings();
                }),
            });
            this.addCommand({
                id: "ewt-toggle-on-top",
                name: "Toggle always on top",
                callback: () => __awaiter(this, void 0, void 0, function* () {
                    this.settings.alwaysOnTop = !this.settings.alwaysOnTop;
                    setAlwaysOnTop(this.settings.alwaysOnTop);
                    yield this.saveSettings();
                }),
            });
        });
    }
    setupStatusBar() {
        this.statusBarIcon = this.addStatusBarItem();
        this.statusBarIcon.addClass("ewt-statusbar-button");
        obsidian.addIcon("electron-window", ICON_SVG);
        obsidian.setIcon(this.statusBarIcon, "electron-window");
        this.registerDomEvent(this.statusBarIcon, "click", (e) => {
            const statusBarRect = this.statusBarIcon.parentElement.getBoundingClientRect();
            const statusBarIconRect = this.statusBarIcon.getBoundingClientRect();
            const menu = new obsidian.Menu(this.app).addItem((item) => {
                item.setTitle("Always on top");
                const itemDom = item.dom;
                const toggleComponent = new obsidian.ToggleComponent(itemDom)
                    .setValue(this.settings.alwaysOnTop)
                    .setDisabled(true);
                const toggle = () => __awaiter(this, void 0, void 0, function* () {
                    this.settings.alwaysOnTop = !this.settings.alwaysOnTop;
                    toggleComponent.setValue(this.settings.alwaysOnTop);
                    setAlwaysOnTop(this.settings.alwaysOnTop);
                    yield this.saveSettings();
                });
                item.onClick((e) => {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    toggle();
                });
            });
            const menuDom = menu.dom;
            menuDom.addClass("ewt-statusbar-menu");
            const item = menuDom.createDiv("menu-item");
            item.createDiv({ cls: "menu-item-icon" });
            item.createDiv({ text: "Opacity", cls: "menu-item-title" });
            item.onClickEvent((e) => e.stopPropagation());
            new obsidian.SliderComponent(item)
                .setLimits(50, 100, 1)
                .setValue(this.settings.opacity * 100)
                .onChange(obsidian.debounce((value) => __awaiter(this, void 0, void 0, function* () {
                console.log(value);
                this.settings.opacity = value / 100;
                setOpacity(this.settings.opacity);
                yield this.saveSettings();
            }), 100, true));
            menu.showAtPosition({
                x: statusBarIconRect.right + 5,
                y: statusBarRect.top - 5,
            });
        });
    }
    onunload() {
        setOpacity(DEFAULT_SETTINGS.opacity);
        setAlwaysOnTop(DEFAULT_SETTINGS.alwaysOnTop);
        setVibrancy(DEFAULT_SETTINGS.vibrancy, this.getIsTranslucent());
        setTrafficLightsPos(this.styleTag, DEFAULT_SETTINGS.trafficLightsPosX, DEFAULT_SETTINGS.trafficLightsPosY);
        this.styleTag.remove();
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
}
class SettingsTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        new obsidian.Setting(containerEl).setName("Always on top").addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.alwaysOnTop).onChange(obsidian.debounce((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.alwaysOnTop = value;
                setAlwaysOnTop(this.plugin.settings.alwaysOnTop);
                yield this.plugin.saveSettings();
            }), 100, true));
        });
        new obsidian.Setting(containerEl)
            .setName("Window opacity percent")
            .addSlider((slider) => {
            slider
                .setLimits(50, 100, 1)
                .setDynamicTooltip()
                .setValue(this.plugin.settings.opacity * 100)
                .onChange(obsidian.debounce((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.opacity = value / 100;
                setOpacity(this.plugin.settings.opacity);
                yield this.plugin.saveSettings();
            }), 100, true));
        });
        if (process.platform === "darwin") {
            new obsidian.Setting(containerEl)
                .setName("Window vibrancy")
                .setDesc("Note: this can cause lag on some systems")
                .addDropdown((dropdown) => {
                dropdown
                    .addOptions(vibrancySettings.reduce((opts, setting) => {
                    opts[setting] = setting;
                    return opts;
                }, {}))
                    .setValue(this.plugin.settings.vibrancy)
                    .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                    this.plugin.settings.vibrancy = value;
                    setVibrancy(this.plugin.settings.vibrancy, this.plugin.getIsTranslucent());
                    yield this.plugin.saveSettings();
                }));
            });
            new obsidian.Setting(containerEl)
                .setName("Traffic lights X position")
                .addText((input) => {
                input.inputEl.setAttribute("type", "number");
                input
                    .setValue(this.plugin.settings.trafficLightsPosX.toString())
                    .onChange(obsidian.debounce((value) => __awaiter(this, void 0, void 0, function* () {
                    const n = parseInt(value);
                    if (isNaN(n)) {
                        return;
                    }
                    this.plugin.settings.trafficLightsPosX = n;
                    setTrafficLightsPos(this.plugin.styleTag, this.plugin.settings.trafficLightsPosX, this.plugin.settings.trafficLightsPosY);
                    yield this.plugin.saveSettings();
                }), 100, true));
            });
            new obsidian.Setting(containerEl)
                .setName("Traffic lights Y position")
                .addText((input) => {
                input.inputEl.setAttribute("type", "number");
                input
                    .setValue(this.plugin.settings.trafficLightsPosY.toString())
                    .onChange(obsidian.debounce((value) => __awaiter(this, void 0, void 0, function* () {
                    const n = parseInt(value);
                    if (isNaN(n)) {
                        return;
                    }
                    this.plugin.settings.trafficLightsPosY = n;
                    setTrafficLightsPos(this.plugin.styleTag, this.plugin.settings.trafficLightsPosX, this.plugin.settings.trafficLightsPosY);
                    yield this.plugin.saveSettings();
                }), 100, true));
            });
        }
    }
}

module.exports = ElectronWindowTweaker;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIm1haW4udHMiXSwic291cmNlc0NvbnRlbnQiOm51bGwsIm5hbWVzIjpbIlBsdWdpbiIsImFkZEljb24iLCJzZXRJY29uIiwiTWVudSIsIlRvZ2dsZUNvbXBvbmVudCIsIlNsaWRlckNvbXBvbmVudCIsImRlYm91bmNlIiwiUGx1Z2luU2V0dGluZ1RhYiIsIlNldHRpbmciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF1REE7QUFDTyxTQUFTLFNBQVMsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUU7QUFDN0QsSUFBSSxTQUFTLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxPQUFPLEtBQUssWUFBWSxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLFVBQVUsT0FBTyxFQUFFLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7QUFDaEgsSUFBSSxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDL0QsUUFBUSxTQUFTLFNBQVMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0FBQ25HLFFBQVEsU0FBUyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFF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
